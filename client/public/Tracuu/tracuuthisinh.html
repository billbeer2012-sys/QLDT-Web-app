<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tra cứu thông tin xét tuyển - CamauVKC</title>
    <!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-2R36T9B3EL"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-2R36T9B3EL');
	</script>
	
	<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #007bff;
        }
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f4f9;
        }
        .header-fixed {
            backdrop-filter: blur(10px);
            background: linear-gradient(135deg, #003399 0%, #0066cc 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .logo-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #fbbf24;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        /* Footer Styles */
        .footer {
            background: linear-gradient(135deg, #003399 0%, #0066cc 100%);
            color: white;
            padding: 20px 0;
            margin-top: 50px;
        }
        .search-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }
        .search-button {
            background-color: var(--secondary-color);
        }
        .search-button:hover {
            background-color: var(--primary-color);
        }
        .error {
            color: #dc3545;
            border-left: 4px solid #dc3545;
            background-color: rgba(220, 53, 69, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        .highlight {
            font-weight: bold;
            color: #1e40af; /* Darker blue for better contrast */
        }
        /* Bổ sung style cho dòng trúng tuyển */
        .trung-tuyen-row {
            font-weight: 700;
            background-color: #e0f2fe; /* Light blue background */
        }
        .check-mark {
            color: #16a34a; /* Green color for check mark */
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-50">
   <!-- Header -->
    <header class="header-fixed fixed top-0 left-0 right-0 z-50 shadow-lg" style="top: 0;">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <img src="https://camauvkc.edu.vn/img/Logo.jpg" alt="Logo trường" class="logo-circle">
                    <div>
                        <h1 class="text-white font-bold text-sm md:text-lg leading-tight">
                            TRƯỜỜNG CAO ĐẲNG NGHỀ VIỆT NAM - HÀN QUỐC CÀ MAU
                        </h1>
                        <p class="text-yellow-400 font-medium text-xs md:text-base">MÃ TRƯỜNG: D99</p>
                    </div>
                </div>
            </div>
        </div>
    </header>
 
    <!-- Nội dung chính -->
    <main class="max-w-5xl mx-auto px-4 pt-24 pb-2">
		<div class="bg-blue-50 p-4 rounded-lg mb-6">
			<h2 class="search-title text-2xl font-bold text-center pb-2">TRA CỨU THÔNG TIN XÉT TUYỂN</h2>
		</div>
		
		<div class="search-container fade-in bg-white p-6 rounded-lg shadow-md">
            <div>
                <label for="searchInput" class="block mb-2 font-medium text-gray-700">Nhập thông tin cần tìm</label>
                <input type="text" id="searchInput" placeholder="Nhập Mã thí sinh hoặc Họ và tên hoặc CCCD" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none">
                <button onclick="searchThiSinh()" class="search-button w-full mt-3 p-3 text-white font-bold rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center">
                    <i class="fas fa-search mr-2"></i> Tìm kiếm
                </button>
            </div>
        </div>
        
        <div class="result-container bg-white p-6 rounded-lg shadow-md mt-6" id="result"></div>
		<div class="bg-gray-50 mt-6 p-4 rounded-lg border border-gray-200">
                <h2 class="text-xl font-bold text-blue-800 mb-4">Thông tin liên hệ hỗ trợ</h2>
                <p class="mb-2"><i class="fas fa-phone-alt text-blue-600 mr-2"></i> Hotline: <strong>02903.592.101 - 02903.592.102</strong></p>
        </div>
	</main>
    
	<!-- Footer -->
    <footer class="footer">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h4 class="text-x1 text-center font-bold mb-1">TRƯỜNG CAO ĐẲNG NGHỀ VIỆT NAM - HÀN QUỐC CÀ MAU</h4>
					<h5 class="font-semibold mb-1 text-center text-yellow-400">CA MAU VIETNAM - KOREA VOCATIONAL COLLEGE</h5>
					<h5 class="font-semibold mb-2 text-center text-yellow-400">(CAMAUVKC)</h5>
                     <div class="flex space-x-4 items-center justify-center text-center" style="margin-top:20px;">
                        <a href="https://camauvkc.edu.vn" alt="Website" target="_blank" class="w-8 h-8 flex items-center justify-center bg-white text-blue-600 rounded-full hover:bg-blue-100 transition duration-300"><i class="fas fa-globe"></i></a>
						<a href="https://facebook.com/camauvkc" alt="Fanpage" target="_blank" class="w-8 h-8 flex items-center justify-center bg-white text-blue-600 rounded-full hover:bg-blue-100 transition duration-300"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://zalo.me/camauvkc" target="_blank" class="w-8 h-8 flex items-center justify-center bg-white text-blue-600 rounded-full hover:bg-blue-100 transition duration-300"><img src="https://camauvkc.edu.vn/img/Icon_Zalo.svg" alt="ZaloOA"></a>
						<a href="https://youtube.com/@camauvkc" target="_blank" class="w-8 h-8 flex items-center justify-center bg-white text-blue-600 rounded-full hover:bg-blue-100 transition duration-300"><img src="https://camauvkc.edu.vn/img/Icon_Youtube.svg" alt="Youtube"></a>
					</div>
                </div>
                <div>
                    <h4 class="text-sm font-bold mb-4">LIÊN HỆ</h4>
                    <p class="mb-2 text-sm"><i class="fas fa-map-marker-alt mr-2"></i> Số 08, đường Mậu Thân, phường An Xuyên, tỉnh Cà Mau</p>
                    <p class="mb-2 text-sm"><i class="fas fa-phone mr-2"></i> 02903.832.835</p>
					<p class="mb-2 text-sm"><i class="fas fa-envelope mr-2"></i> <a href="mailto:camauvkc@camauvkc.edu.vn" class="hover:underline"> camauvkc@camauvkc.edu.vn</a></p>
                   <p class="mb-2 flex mb-2 text-sm text-yellow-300"><i class="fas fa-headset mr-2 w-4 text-center"></i><span>02903.592.101 (ĐT) - 02903.592.102 (SV)</span></p>
                </div>
                <!--Map trường-->
				<div>
					<div class="rounded-lg shadow-md overflow-hidden">
						<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1969.2305755919815!2d105.15840791790602!3d9.202981887153484!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31a149d5005493c7%3A0x55fe687b8b8dceb9!2zVHLGsOG7nW5nIENhbyDEkeG6s25nIG5naOG7gSBWaeG7h3QgTmFtIC0gSMOgbiBRdeG7kWMgQ8OgIE1hdQ!5e0!3m2!1svi!2s!4v1748395297134!5m2!1svi!2s" 
							width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" 
							referrerpolicy="no-referrer-when-downgrade"></iframe>
					</div>
				</div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-4 py-0 text-center">
                <p class="text-sm text-yellow-400">© 2025 - H.M.Hiếu - CamauVKC</p>
            </div>
        </div>
    </footer>
	<!-- end Footer -->  
	    
    <script>
        // --- BẮT ĐẦU CẬP NHẬT JAVASCRIPT ---
        async function searchThiSinh() {
            const searchTerm = document.getElementById('searchInput').value.trim();
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<div class="text-center p-8"><i class="fas fa-spinner fa-spin text-4xl text-blue-500"></i><p class="mt-2">Đang tìm kiếm...</p></div>';

            if (!searchTerm) {
                resultDiv.innerHTML = '<p class="error p-4 text-center">Vui lòng nhập thông tin tìm kiếm.</p>';
                return;
            }

            try {
                const response = await fetch(`https://camauvkc.edu.vn:3000/api/public/search?searchTerm=${encodeURIComponent(searchTerm)}`);
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error || `Lỗi ${response.status}: Không thể lấy dữ liệu.`);
                }

                const data = await response.json();

                if (data.error) {
                    resultDiv.innerHTML = `<p class="error p-4 text-center">${data.error}</p>`;
                } else if (!Array.isArray(data) || data.length === 0) {
                    resultDiv.innerHTML = '<p class="error p-4 text-center">Không tìm thấy thông tin phù hợp. Hãy kiểm tra lại dữ liệu cần tìm!</p>';
                } else {
                    const thiSinhInfo = data[0];
                    let html = `
                    <h3 class="text-xl font-bold text-blue-800 mb-4 border-b-2 border-blue-800 pb-2">
                        <i class="fas fa-user-graduate mr-2"></i>Thông tin thí sinh
                    </h3>
                    <div class="overflow-x-auto"><table class="w-full">
                        <tr><td class="font-medium w-1/3">Mã thí sinh:</td><td><b>${thiSinhInfo.MaSo}</b></td></tr>
                        <tr><td class="font-medium">Họ và tên:</td><td><b class="uppercase">${thiSinhInfo.HoTen}</b></td></tr>
                        <tr><td class="font-medium">Giới tính:</td><td>${thiSinhInfo.GioiTinh}</td></tr>
                        <tr><td class="font-medium">Ngày sinh:</td><td>${thiSinhInfo.NgaySinh}</td></tr>
                        <tr><td class="font-medium">Nơi sinh:</td><td>${thiSinhInfo.NoiSinh}</td></tr>
                        <tr><td class="font-medium">Đối tượng:</td><td>${thiSinhInfo.DTCS}</td></tr>
                        <tr><td class="font-medium">Khu vực:</td><td>${thiSinhInfo.MaKV}</td></tr>
                        <tr><td class="font-medium">Tổng Điểm ƯT:</td><td>${thiSinhInfo.TongDUT}</td></tr>
                        <tr><td class="font-medium">Điểm ƯT được tính:</td><td>${thiSinhInfo.DiemUT}</td></tr>
                    </table></div>
                    <h3 class="text-xl font-bold text-blue-800 mb-4 mt-8 border-b-2 border-blue-800 pb-2">
                        <i class="fas fa-clipboard-list mr-2"></i>Thông tin đăng ký xét tuyển
                    </h3>
                    <div class="overflow-x-auto"><table class="w-full">
                        <tr><td class="font-medium w-1/3">Đợt xét tuyển:</td><td><b>${thiSinhInfo.DotXT}</b></td></tr>
                        <tr><td class="font-medium">Ngày xét tuyển:</td><td><b>${thiSinhInfo.NgayXetTuyen}</b></td></tr>
                    </table></div>
                    <h3 class="text-xl font-bold text-blue-800 mb-4 mt-6 border-b-2 border-blue-800 pb-2">
                        <i class="fas fa-tasks mr-2"></i>Đăng ký nguyện vọng
                    </h3>
                    <div class="overflow-x-auto"><table class="w-full text-left"><thead><tr class="bg-blue-100">
                        <th class="p-2 text-center">NV</th><th class="p-2">Ngành nghề</th><th class="p-2">Trình độ</th><th class="p-2 text-center">Điểm XT</th><th class="p-2 text-center">Trúng tuyển</th>
                    </tr></thead><tbody>`;
                    
                    thiSinhInfo.NguyenVong.forEach(nv => {
                        const isTrungTuyen = nv.Trungtuyen === 1;
                        const rowClass = isTrungTuyen ? 'trung-tuyen-row' : '';
                        const checkMark = isTrungTuyen ? '<span class="check-mark">✓</span>' : '';
                        html += `<tr class="${rowClass}"><td class="p-2 text-center">${nv.MaNVXT}</td><td class="p-2">${nv.NganhNghe}</td><td class="p-2">${nv.TrinhDo}</td><td class="p-2 text-center">${nv.DiemXT}</td><td class="p-2 text-center">${checkMark}</td></tr>`;
                    });

                    html += `</tbody></table></div>
                    <h3 class="text-xl font-bold text-blue-800 mb-4 mt-6 border-b-2 border-blue-800 pb-2">
                        <i class="fas fa-book mr-2"></i>Môn xét tuyển
                    </h3>
                    <div class="overflow-x-auto"><table class="w-full"><thead><tr class="bg-yellow-50">
                        <th class="p-2 text-left">Tên môn xét tuyển</th><th class="p-2 text-center">Điểm</th>
                    </tr></thead><tbody>`;
                    
                    thiSinhInfo.MonXetTuyen.forEach(mxt => {
                        html += `<tr><td class="p-2">${mxt.MonXT}</td><td class="p-2 text-center">${mxt.Diem}</td></tr>`;
                    });
                    html += `</tbody></table></div>`;
                    
                    // Cập nhật phần hiển thị kết quả xét tuyển
                    if (thiSinhInfo.TrungTuyen === 1) {
                        html += `
                        <div class="mt-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                            <h3 class="text-xl font-bold text-green-800 mb-3">
                                <i class="fas fa-check-circle mr-2"></i>Kết quả xét tuyển
                            </h3>
                            <p class="font-bold text-gray-800">Thí sinh đã trúng tuyển vào học tại trường:</p>
                            <ul class="list-none pl-2 mt-2 space-y-1 text-gray-700">
                                <li>- Ngành nghề: <b class="highlight">${thiSinhInfo.NganhNghe || 'N/A'}</b></li>
                                <li>- Trình độ: <b class="highlight">${thiSinhInfo.TrinhDo || 'N/A'}</b></li>
                                <li>- Điểm xét tuyển: <b class="highlight">${thiSinhInfo.TongDXT}</b></li>
                            </ul>
                        </div>`;
                    } else {
                         // Nếu chưa có kết quả (TrungTuyen = 0 hoặc null) thì hiển thị thông báo chờ
                         html += '<div class="mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-500"><p class="text-yellow-700 font-bold"><i class="fas fa-info-circle mr-2"></i>Chưa có kết quả xét tuyển chính thức!</p></div>';
                    }

                    resultDiv.innerHTML = html;
                    resultDiv.classList.add('fade-in');
                }
            } catch (error) {
                resultDiv.innerHTML = `<p class="error p-4 text-center"><i class="fas fa-exclamation-triangle mr-2"></i>Lỗi: ${error.message}</p>`;
            }
        }
        // --- KẾT THÚC CẬP NHẬT JAVASCRIPT ---

        function handleUrlSearch() {
            const urlParams = new URLSearchParams(window.location.search);
            const maso = urlParams.get('maso');
            if (maso) {
                document.getElementById('searchInput').value = maso;
                searchThiSinh();
            }
        }

        document.getElementById('searchInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                searchThiSinh();
            }
        });

        window.addEventListener('load', handleUrlSearch);
    </script>
</body>
</html>